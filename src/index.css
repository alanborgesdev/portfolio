@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
    :root {
        /* === DARK MODE (Padrão) === */

        /* Background & Surfaces */
        --background: 220 13% 9%; /* #14151a */
        --foreground: 142 20% 88%; /* #d1e8d8 */

        --card: 220 13% 12%; /* #1a1d24 */
        --card-foreground: 142 20% 88%;

        --popover: 220 13% 12%;
        --popover-foreground: 142 20% 88%;

        /* Primary Colors - Verde Terminal */
        --primary: 142 76% 50%; /* #22c55e */
        --primary-foreground: 220 13% 9%;

        /* Secondary Colors */
        --secondary: 220 10% 20%; /* #2a2d35 */
        --secondary-foreground: 142 20% 82%;

        /* Muted & Accents */
        --muted: 220 10% 18%; /* #26282e */
        --muted-foreground: 220 20% 70%; /* Hue unificado: 220 */

        --accent: 45 93% 55%; /* #fde047 */
        --accent-foreground: 220 13% 9%;

        /* Destructive */
        --destructive: 0 72% 52%;
        --destructive-foreground: 0 0% 100%;

        /* Borders & Inputs */
        --border: 142 30% 25%; /* #2d5037 */
        --input: 142 25% 22%;
        --ring: 142 76% 50%;

        --radius: 0.5rem;

        /* Shadows (Dark Mode - usa glows) */
        --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.3);
        --shadow-card: 0 2px 12px rgba(0, 0, 0, 0.3);
        --shadow-elevated: 0 8px 24px rgba(0, 0, 0, 0.4);

        /* Glow específico para dark mode */
        --glow-primary: 0 0 20px hsl(142 76% 50% / 0.4);
        --glow-primary-strong: 0 0 30px hsl(142 76% 50% / 0.6);

        /* Terminal scan effect - apenas dark */
        --terminal-scan-opacity: 1;
    }

    .light {
        /* === LIGHT MODE (Derivado conforme 4 regras) === */

        /* Background & Surfaces - REGRA 1: Inversão de Luminância */
        --background: 0 0% 98%; /* #fafafa */
        --foreground: 220 15% 10%; /* #161a1f - MAIS ESCURO para contraste */

        --card: 0 0% 100%; /* #ffffff */
        --card-foreground: 220 15% 10%; /* Mesmo valor do foreground */

        --popover: 0 0% 100%;
        --popover-foreground: 220 13% 12%;

        /* Primary Colors - REGRA 2: Mesmo Hue, Lightness ajustada */
        --primary: 142 76% 38%; /* #1a9f4a - mais escuro p/ contraste */
        --primary-foreground: 0 0% 100%; /* Texto branco em botões */

        /* Secondary Colors */
        --secondary: 142 15% 95%; /* #f0f7f2 - verde muito sutil */
        --secondary-foreground: 220 13% 18%;

        /* Muted & Accents - CORRIGIDO: Hue consistente (220) */
        --muted: 142 10% 92%; /* #e8f0ea */
        --muted-foreground: 220 15% 40%; /* #545d6b - contraste WCAG AA, hue 220 */

        --accent: 45 93% 42%; /* #c99a00 - amarelo mais escuro */
        --accent-foreground: 0 0% 100%;

        /* Destructive */
        --destructive: 0 72% 45%;
        --destructive-foreground: 0 0% 100%;

        /* Borders & Inputs */
        --border: 142 25% 82%; /* #c5dcc9 */
        --input: 142 20% 90%; /* #e2ede4 */
        --ring: 142 76% 38%;

        /* REGRA 3: Sombras escuras para hierarquia (NÃO glows) */
        --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.05);
        --shadow-card: 0 2px 8px rgba(0, 0, 0, 0.08), 0 1px 2px rgba(0, 0, 0, 0.04);
        --shadow-elevated: 0 4px 16px rgba(0, 0, 0, 0.1), 0 2px 4px rgba(0, 0, 0, 0.05);

        /* CORRIGIDO: Sem glow no light mode - usar sombras */
        --glow-primary: var(--shadow-elevated);
        --glow-primary-strong: 0 8px 30px rgba(26, 159, 74, 0.15), var(--shadow-elevated);

        /* CORRIGIDO: Desativar efeito de scan no light mode */
        --terminal-scan-opacity: 0;
    }
}

@layer base {
    * {
        @apply border-border;
    }

    body {
        @apply bg-background text-foreground font-sans antialiased;
    }

    html {
        scroll-behavior: smooth;
    }

    /* Scrollbar - adapta ao tema */
    ::-webkit-scrollbar {
        width: 10px;
    }

    ::-webkit-scrollbar-track {
        @apply bg-background;
    }

    ::-webkit-scrollbar-thumb {
        @apply bg-primary/30 rounded-full;
    }

    ::-webkit-scrollbar-thumb:hover {
        @apply bg-primary/50;
    }
}

@layer utilities {
    /* === Gradientes Terminal === */
    .gradient-primary {
        background: linear-gradient(135deg, hsl(142 76% 36%), hsl(142 76% 50%));
    }

    .light .gradient-primary {
        background: linear-gradient(135deg, hsl(142 76% 32%), hsl(142 76% 42%));
    }

    .gradient-accent {
        background: linear-gradient(135deg, hsl(142 76% 36%), hsl(45 93% 47%));
    }

    .gradient-card {
        background: linear-gradient(145deg, hsl(var(--card)) 0%, hsl(var(--card) / 0.95) 100%);
    }

    /* === Sombras Adaptativas (usando variáveis) === */
    .shadow-glow {
        box-shadow: var(--glow-primary);
    }

    .shadow-glow-strong {
        box-shadow: var(--glow-primary-strong);
    }

    .shadow-card {
        box-shadow: var(--shadow-card);
    }

    /* === Glass Card === */
    .glass-card {
        background-color: hsl(var(--card) / 0.7);
        backdrop-filter: blur(12px) saturate(180%);
        -webkit-backdrop-filter: blur(12px) saturate(180%);
        border: 1px solid hsl(var(--border) / 0.5);
    }

    .light .glass-card {
        background-color: hsl(var(--card) / 0.9);
        backdrop-filter: blur(8px) saturate(120%);
        box-shadow: var(--shadow-card);
    }

    /* === Terminal Effects === */
    .terminal-border {
        border: 2px solid hsl(var(--primary));
        position: relative;
    }

    .terminal-border::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 1px;
        background: linear-gradient(90deg, transparent, hsl(var(--primary)), transparent);
        animation: scan 2s linear infinite;
        /* CORRIGIDO: Usa variável para controlar visibilidade */
        opacity: var(--terminal-scan-opacity);
    }

    @keyframes scan {
        0%,
        100% {
            opacity: 0;
        }
        50% {
            opacity: var(--terminal-scan-opacity);
        }
    }

    /* === Typing Cursor === */
    .typing-cursor::after {
        content: '_';
        animation: blink 1s infinite;
        color: hsl(var(--primary));
    }

    @keyframes blink {
        0%,
        50% {
            opacity: 1;
        }
        51%,
        100% {
            opacity: 0;
        }
    }

    /* === Hover States - Adaptativo === */
    /* Garante que hovers com glow funcionem corretamente em ambos os temas */
    .hover\:shadow-glow:hover {
        box-shadow: var(--glow-primary);
    }

    .hover\:shadow-glow-strong:hover {
        box-shadow: var(--glow-primary-strong);
    }
}
